plugins {
    id 'java'
    id "com.github.johnrengelman.shadow" version "6.1.0"
    id "com.gorylenko.gradle-git-properties" version "2.4.1"
    id 'org.jetbrains.kotlin.jvm' version '1.9.0'
}

group = 'org.cubewhy.lunarcn'
version = '1.4-b5-SNAPSHOT'

configurations {
    include
    implementation.extendsFrom(include)
}

repositories {
    maven { url = "https://jitpack.io/" }
    mavenCentral()
    jcenter()
}

dependencies {
    include fileTree(dir: "libs", includes: ['*.jar'])

    include 'com.squareup.okhttp3:okhttp:4.11.0'
    include('com.jagrosh:DiscordIPC:0.4') {
        exclude module: "gson"
        exclude module: "log4j"
        exclude module: "json"
    }
    include "org.jetbrains.kotlin:kotlin-stdlib-jdk8"

    implementation 'org.jetbrains:annotations:24.0.1'
}

shadowJar {
    archiveClassifier.set("fatjar")
    configurations = [project.configurations.include]
    duplicatesStrategy DuplicatesStrategy.EXCLUDE

    exclude "native-binaries/**"

    exclude "LICENSE.txt"

    exclude "META-INF/maven/**"
    exclude "META-INF/versions/**"

    exclude "org/apache/**"
    exclude "org/junit/**"
}

build.dependsOn(shadowJar)

